
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>SANG DEV SHOP - MÃ NGUỒN UY TÍN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
<!-- Mobile Menu Button -->
<button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="logo">SANG DEV</div>
    <p>Shop Mã Nguồn Private</p>
  </div>
  <div class="sidebar-menu">
    <div class="menu-item" onclick="showSection('productsSection')">
      <span><i class="fas fa-home"></i> Sản Phẩm</span>
    </div>
    <div class="menu-item" onclick="showSection('historySection')">
      <span><i class="fas fa-history"></i> Lịch Sử Mua</span>
    </div>
    <div class="menu-item" onclick="showSection('napSection')">
      <span><i class="fas fa-wallet"></i> Nạp Tiền</span>
    </div>
    <div class="menu-item" onclick="showSection('newsSection')">
  <span><i class="fas fa-bullhorn"></i> bài đăng & thông báo</span>
</div>
    <p class="section-title">KHÁC</p>
    <div class="menu-item has-submenu" onclick="toggleSubmenu(this)">
      <span><i class="fas fa-phone-alt"></i> Liên Hệ</span>
      <span class="arrow">▼</span>
    </div>
    <div class="submenu">
      <a href="https://www.facebook.com/profile.php?id=61574167490098" target="_blank"><i class="fab fa-facebook"></i> Facebook</a>
      <a href="https://chat.zalo.me/" target="_blank"><i class="fas fa-comment-dots"></i> Zalo</a>
      <a href="https://www.tiktok.com/@sangnguyendev" target="_blank"><i class="fab fa-tiktok"></i> TikTok</a>
    </div>
    <div class="menu-item hidden" id="adminSidebarBtn" onclick="showSection('adminPanel')">
      <span><i class="fas fa-user-shield"></i> Admin Panel</span>
    </div>
    <div class="menu-item hidden" id="logoutSidebar" onclick="auth.signOut()">
      <span><i class="fas fa-sign-out-alt"></i> Đăng Xuất</span>
    </div>
  </div>
</div>
<!-- Main Wrapper -->
<div class="main-wrapper">
  <!-- Báo cáo Admin Button -->
  <button class="admin-report-btn" id="adminReportBtn">
    <i class="fas fa-exclamation-circle"></i> Báo cáo Admin
  </button>
  <!-- Header -->
  <header>
    <div class="tagline">
      <p>Chào mừng bạn đến với dịch vụ của tôi – Một lập trình viên yêu thích xây dựng website sáng tạo</p>
      <p>Mình chuyên phát triển website, ứng dụng với giao diện đẹp mắt và tối ưu hiệu suất</p>
      <p>Nếu tải về không iết sữ dụng thì liên hệ admin để hộ trở miễn phí </p>
      <p>Bạn có thể xem thêm về mình <a href="https://www.facebook.com/profile.php?id=61574167490098" target="_blank">tại đây</a> ngày chúng <a href="https://demngayyeu-jade.vercel.app/in1.html" target="_blank">cạnh nhau nha bé trang m7</a> </p>
      <p>Tạo website tự động <a href="https://bot-five-pi.vercel.app/" target="_blank">tại đây</a></p>
    </div>
    <div id="musicPerfect">
  <div class="bar">
    <!-- BÊN TRÁI: ký tự âm nhạc -->
    <div class="music-note">♪</div>

    <!-- CHÍNH GIỮA: tên bài hát -->
    <div class="song-title" id="title">♪ Nhạc Chill #1 - SANG DEV SHOP ♪</div>

    <!-- BÊN PHẢI: 3 nút Lùi - Play/Pause - Tới -->
    <div class="right-controls">
      <div class="ctrl" id="prev">◀</div>
      <div class="ctrl play" id="playBtn">▶</div> <!-- Ban đầu là ▶ -->
      <div class="ctrl" id="next">▶</div>
    </div>
  </div>
</div>

<audio id="audio" preload="auto"></audio>
  </header>
  <!-- Category Filter -->
  <div class="category-filter">
    <button class="category-btn active" data-category="all">Tất cả</button>
    <button class="category-btn" data-category="premium">Trả phí</button>
    <button class="category-btn" data-category="free">Miễn phí</button>
    <button class="category-btn" data-category="love">Tình yêu</button>
    <button class="category-btn" data-category="3js">ThreeJS</button>
    <button class="category-btn" data-category="wed">Website</button>
  </div>
  <!-- Content -->
  <div class="container">
    <!-- Auth -->
    <div id="authSection" class="section card" style="max-width:420px;margin:40px auto;">
      <h2 id="authTitle">Đăng nhập</h2>
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="pass" placeholder="Mật khẩu" required>
      <input type="text" id="username" placeholder="Tên hiển thị (đăng ký)" class="hidden">
      <button class="btn btn-primary" id="authAction">Đăng nhập</button>
      <p style="text-align:center;margin-top:10px;">
        <a href="#" id="switchAuth">Chưa có tài khoản? Đăng ký ngay</a>
      </p>
    </div>
    <div id="loading" class="section">Đang tải sản phẩm...</div>
   
    <div id="productsSection" class="section active">
      <div class="products-grid" id="products"></div>
      <!-- PHÂN TRANG -->
      <div id="pagination" class="pagination-wrapper" style="margin:50px auto; text-align:center; display:none;">
        <button class="page-btn" id="prevBtn">Trước</button>
       
        <div id="pageNumbers" style="display:inline-flex; gap:8px; align-items:center; margin:0 15px;"></div>
       
        <span style="color:#aaa; margin:0 10px;">Đi đến trang:</span>
        <input type="number" id="gotoPage" min="1" style="width:70px; padding:10px; border-radius:12px; border:2px solid #00ffff; background:rgba(255,255,255,0.1); color:#fff; text-align:center; outline:none;" placeholder="1">
       
        <button class="page-btn" id="nextBtn">Sau</button>
      </div>
    </div>
    <!-- Lịch sử -->
    <div id="historySection" class="section hidden">
      <h2>Lịch sử mua hàng</h2>
      <div id="historyList"></div>
    </div>
    <!-- Nạp tiền -->
    <div id="napSection" class="section hidden">
      <h2>Nạp tiền vào tài khoản</h2>
      <div class="card" style="background:rgba(0,255,255,0.1);text-align:center;">
        <p><strong>Ngân hàng:</strong> BIDV</p>
        <p><strong>Chủ tài khoản:</strong> DUONG THI THUY HANG</p>
        <p><strong>Số tài khoản:</strong> 8870110660</p>
       
        <div style="margin:20px 0;">
          <img id="qrImage"
               src="https://sf-static.upanhlaylink.com/img/image_202511206272efd82bad8a9b72f128e1e585fa57.jpg"
               alt="Mã QR nạp tiền"
               style="width:260px;height:260px;border-radius:12px;border:3px solid #00ffff;box-shadow:0 0 20px rgba(0,255,255,0.4);cursor:pointer;">
          <p style="margin-top:10px;color:#0f0;font-size:0.9em;">Quét mã QR để nạp nhanh (tự động điền nội dung)</p>
        </div>
        <p><strong>Nội dung chuyển khoản:</strong> <code id="noidungNap" style="font-size:1.3em;color:#ff00ff;">Chưa đăng nhập</code></p>
        <p style="color:#ffeb3b;margin-top:10px;">Bắt buộc ghi đúng nội dung để được duyệt tự động!</p>
      </div>
      <input type="number" id="amountNap" placeholder="Số tiền nạp (tối thiểu 10,000đ)" min="10000" style="margin-top:15px;">
      <button class="btn btn-success" onclick="daNap()" style="width:100%;padding:15px;font-size:1.2em;margin-top:10px;">Tôi đã chuyển khoản</button>
    </div>
    <!-- Tin tức của Admin -->
<div id="newsSection" class="section hidden">
  <h2 style="text-align:center;color:#00ffff;margin:30px 0;">
    <i class="fas fa-bullhorn"></i> THÔNG BÁO TỪ SANG DEV
  </h2>
  <div id="newsList" style="display:grid;gap:25px;max-width:900px;margin:0 auto;"></div>
  <p id="noNews" style="text-align:center;color:#888;margin:50px;font-size:1.2em;">Chưa có tin tức nào!</p>
</div>
  </div>
  <footer style="text-align:center;padding:40px;color:#888;">
      <p><a href="https://sangdevshop.vercel.app" style="color:#00ffff;">© 2025 SANG DEV - Shop mã nguồn uy tín</a></p>
    </footer>
</div>
    
    <!-- Admin Panel -->
    <div id="adminPanel" class="section hidden">
      <h2>Admin Panel</h2>
      <div class="card">
        <h3>Thêm / Sửa sản phẩm</h3>
        <input type="text" id="pName" placeholder="Tên sản phẩm">
        <textarea id="pDesc" placeholder="Mô tả chi tiết (hỗ trợ HTML)" rows="4"></textarea>
        <input type="number" id="pPrice" placeholder="Giá (VNĐ)" min="1000">
        <input type="number" id="pStock" placeholder="Số lượng key" min="1">
        <input type="text" id="pDownloadURL" placeholder="Link tải source (sau khi mua)">
       
        <!-- BẰNG PHẦN NÀY -->
<div style="margin:15px 0;">
  <label><strong>Phân loại (có thể chọn nhiều - giữ Ctrl/Cmd)</strong></label>
  <select id="pCategory" multiple style="width:100%;height:120px;padding:10px;border-radius:8px;background:rgba(255,255,255,0.1);color:#fff;border:1px solid rgba(0,255,255,0.3);">
    <option value="premium">Trả phí</option>
    <option value="free">Miễn phí</option>
    <option value="love">Tình yêu</option>
    <option value="3js">ThreeJS</option>
    <option value="wed">Website</option>
  </select>
  <p style="font-size:0.9em;color:#aaa;margin-top:5px;">Nhấn giữ Ctrl (Windows) hoặc Cmd (Mac) để chọn nhiều danh mục</p>
       
        <div style="margin:15px 0;">
          <label><strong>Link ảnh demo (mỗi dòng 1 link)</strong></label>
          <textarea id="pImageLinks" rows="4" placeholder="https://example.com/image1.jpg\nhttps://example.com/image2.png"></textarea>
        </div>
        <div style="margin:15px 0; padding:12px; background:rgba(0,255,255,0.1); border-radius:8px;">
  <label style="display:flex; align-items:center; cursor:pointer; font-weight:600; color:#00ffff;">
    <input type="checkbox" id="pPinned" style="width:20px; height:20px; margin-right:12px; accent-color:#00ffff;">
    <span><i class="fas fa-thumbtack"></i> Ghim sản phẩm lên đầu (hiển thị đầu tiên)</span>
  </label>
  <p style="font-size:0.85em; color:#aaa; margin:5px 0 0 32px;">
    Sản phẩm được ghim sẽ luôn xuất hiện ở vị trí đầu tiên trong mọi danh mục
  </p>
</div>
        <div id="linkPreview" style="margin:10px 0;"></div>
        <div style="margin-top:15px;">
          <button class="btn btn-primary" id="addProductBtn">Thêm sản phẩm mới</button>
          <button class="btn btn-danger" onclick="deleteSelected()">Xóa sản phẩm đã chọn</button>
        </div>
      </div>
      <h3 style="margin-top:30px;">Yêu cầu nạp tiền</h3>
      <div id="pendingPayments"><p>Đang tải...</p></div>
      <h3 style="margin-top:30px;">Quản lý người dùng</h3>
      <div class="card">
        <div style="margin-bottom:15px;display:flex;gap:10px;flex-wrap:wrap;">
          <input type="text" id="searchUser" placeholder="Tìm email / UID / tên hiển thị..." style="flex:1;min-width:200px;">
          <button class="btn btn-primary" onclick="loadUsers()">Tải lại</button>
        </div>
        <div id="usersList" style="max-height:600px;overflow-y:auto;">
          <p style="text-align:center;color:#aaa;">Nhấn "Tải lại" để xem danh sách người dùng</p>
        </div>
      </div>
    </div>
    
  </div>
</div>
<!-- Modal Báo Cáo Admin -->
<div class="modal" id="adminReportModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Liên hệ Admin</h2>
      <button class="close-modal">×</button>
    </div>
    <div class="contact-info" style="text-align:center;padding:30px;">
      <img id="adminAvatar" src="https://sangdevshop.vercel.app/admin.jpg" alt="Admin">
      <h3 style="margin:15px 0;color:#00ffff;">sang_dev</h3>
      <p>Nếu có lỗi hãy báo admin để khắc phục nhanh nhất</p>
      <p>Luôn hỗ trợ tận tình 24/7</p>
      <div style="margin-top:25px;display:flex;justify-content:center;gap:15px;flex-wrap:wrap;">
        <a href="https://www.facebook.com/sang.nguyen.812049" target="_blank" style="background:#1877f2;color:#fff;padding:12px 20px;border-radius:12px;">
          <i class="fab fa-facebook"></i> Facebook
        </a>
        <a href="https://zalo.me/0335764804" target="_blank" style="background:#06c755;color:#fff;padding:12px 20px;border-radius:12px;">
          <i class="fas fa-comment-dots"></i> Zalo
        </a>
        <a href="mailto:nguyenhongsang0207@gmail.com" style="background:#ff5a5f;color:#fff;padding:12px 20px;border-radius:12px;">
          <i class="fas fa-envelope"></i> Gmail
        </a>
      </div>
    </div>
  </div>
</div>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<audio id="warnSound" src="mix_28s (audio-joiner.com).mp3" preload="auto" loop></audio>

<style>
#blockOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.65);
    backdrop-filter: blur(6px);
    display: none;
    z-index: 999999;
}
#blockMessage {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgb(0, 0, 0);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    z-index: 1000000;
    display: none;
    font-size: 18px;
}
</style>

<div id="blockOverlay"></div>
<div id="blockMessage">⚠️ Bạn đã sử dụng thao tác bị cấm!<br>Hệ thống sẽ khóa thao tác trong 30 giây.</div>
</body>
<script>
// CHỈ ADMIN MỚI THẤY NÚT XÓA BÀI VIẾT
auth.onAuthStateChanged(user => {
  if (user) {
    db.collection("users").doc(user.uid).get().then(snap => {
      if (snap.exists && snap.data().role === "admin") {
        // Thêm nút xóa vào mọi bài viết
        document.querySelectorAll(".news-card, .card").forEach(card => {
          if (card.querySelector(".delete-news-btn")) return; // tránh thêm 2 lần
          
          const btn = document.createElement("button");
          btn.innerHTML = "XÓA BÀI";
          btn.className = "btn btn-danger";
          btn.style.cssText = "position:absolute;top:12px;right:12px;z-index:10;padding:8px 16px;font-size:0.9em;";
          
          btn.onclick = async () => {
            if (confirm("Xóa bài viết này thật hả đại ca?")) {
              const id = card.dataset.id || prompt("Dán ID bài viết vào đây:");
              if (id) {
                await db.collection("news").doc(id).delete();
                alert("ĐÃ XÓA SẠCH!");
                card.remove();
              }
            }
          };
          
          card.style.position = "relative";
          card.appendChild(btn);
          
          // Lưu ID vào data để lần sau không cần nhập lại
          card.dataset.id = card.id || "";
        });
      }
    });
  }
});
</script>

<script src="script.js"></script>
</html> 

